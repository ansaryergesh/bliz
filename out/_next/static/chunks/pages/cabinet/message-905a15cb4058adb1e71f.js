_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var c=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),c[t]=e>>>((3&t)<<3)&255;return c}}},"8oxB":function(e,t){var n,r,c=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var o,u=[],l=!1,d=-1;function f(){l&&o&&(l=!1,o.length?u=o.concat(u):d=-1,u.length&&m())}function m(){if(!l){var e=i(f);l=!0;for(var t=u.length;t;){for(o=u,u=[];++d<t;)o&&o[d].run();d=-1,t=u.length}o=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function j(e,t){this.fun=e,this.array=t}function h(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new j(e,t)),1!==u.length||l||i(m)},j.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=h,c.addListener=h,c.once=h,c.off=h,c.removeListener=h,c.removeAllListeners=h,c.emit=h,c.prependListener=h,c.prependOnceListener=h,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},"9n94":function(e,t,n){"use strict";var r=n("nKUr"),c=n("20a2"),s=(n("q1tI"),n("Np+6"));t.a=function(){var e=Object(c.useRouter)();return e.pathname.includes("cabinet")?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("h4",{children:[Object(r.jsx)("a",{href:"/cabinet",className:"",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),"/",Object(r.jsx)("a",{href:"#",className:"gray_font",children:" "+Object(s.b)(s.a,e.pathname)})]})}):e.pathname.includes("cargo")?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("h4",{children:[Object(r.jsx)("a",{href:"/",className:"",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})," / ",Object(r.jsx)("a",{href:"/cargo",children:"\u0413\u0440\u0443\u0437\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0438 /"}),Object(r.jsx)("a",{href:"#",className:"gray_font",children:" "+Object(s.b)(s.a,e.pathname)})]})}):void 0}},EcEN:function(e,t,n){var r=n("xDdU"),c=n("xk4V"),s=c;s.v1=r,s.v4=c,e.exports=s},I2ZF:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,c=n;return[c[e[r++]],c[e[r++]],c[e[r++]],c[e[r++]],"-",c[e[r++]],c[e[r++]],"-",c[e[r++]],c[e[r++]],"-",c[e[r++]],c[e[r++]],"-",c[e[r++]],c[e[r++]],c[e[r++]],c[e[r++]],c[e[r++]],c[e[r++]]].join("")}},Ktyj:function(e,t,n){"use strict";var r=n("JZFu");t.a=r.a},Lyc5:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cabinet/message",function(){return n("zLN2")}])},"Np+6":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n("rePB"),c=Object(r.a)({"\u041b\u0438\u0447\u043d\u044b\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f":"/cabinet","\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c":"/cabinet/password","\u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u044f":"/cabinet/posts","\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438":"/cabinet/workers","\u0417\u0430\u044f\u0432\u043a\u0438":"/cabinet/requests","\u0411\u0430\u043b\u0430\u043d\u0441":"/cabinet/balance","\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435":"/cabinet/favourites","\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f":"/cabinet/message","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442":"/cabinet/delete","\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f":"/cabinet/notification","\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b":"/cabinet/documents","\u0413\u0440\u0443\u0437\u044b":"/cargo","\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442":"/cargo/transport","\u0410\u0443\u043a\u0446\u0438\u043e\u043d":"/cargo/auction","\u0420\u0430\u0441\u0447\u0435\u0442 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0439":"/cargo/distance","\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439":"/cargo/check","\u0421\u043a\u043b\u0430\u0434\u044b":"/cargo","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435":"/cargo/add"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435","/addposts"),s=function(e,t){return e=c,Object.keys(e).find((function(n){return e[n]===t}))}},ejtQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return u}));var r=function(e){var t=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"];return"0"===e.slice(5,6)?e.slice(8,10)+" "+t[parseInt(e.slice(6,7))-1]:e.slice(8,10)+" "+t[parseInt(e.slice(5,7))-1]},c=function(e){var t=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u0439","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"],n=e.slice(0,10),r=e.slice(11,e.length);return n.slice(0,2)+" "+("0"===e.slice(3,4)?t[e.slice(4,5)-1]:t[e.slice(3,5)-1])+" "+r},s=function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})$/);return t?"+"+t[1]+"("+t[2]+") ":null},a=function(e){var t=(""+e).replace(/\D/g,"").match(/^(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})$/);return t?t[3]+" "+t[4]+" "+t[5]:null},i=function(e){if(e)return new Intl.DateTimeFormat("ru",{month:"short",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(Date.parse(e)))},o=function(e){return e.forEach((function(t,n){!1===t&&e.delete(n)})),Array.from(e.keys()).join(",")},u=function(e){return!0===e?1:0}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},xDdU:function(e,t,n){var r,c,s=n("4fRq"),a=n("I2ZF"),i=0,o=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:c;if(null==d||null==f){var m=s();null==d&&(d=r=[1|m[0],m[1],m[2],m[3],m[4],m[5]]),null==f&&(f=c=16383&(m[6]<<8|m[7]))}var j=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:o+1,b=j-i+(h-o)/1e4;if(b<0&&void 0===e.clockseq&&(f=f+1&16383),(b<0||j>i)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=j,o=h,c=f;var _=(1e4*(268435455&(j+=122192928e5))+h)%4294967296;l[u++]=_>>>24&255,l[u++]=_>>>16&255,l[u++]=_>>>8&255,l[u++]=255&_;var v=j/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var g=0;g<6;++g)l[u+g]=d[g];return t||a(l)}},xk4V:function(e,t,n){var r=n("4fRq"),c=n("I2ZF");e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var i=0;i<16;++i)t[s+i]=a[i];return t||c(a)}},zLN2:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("q1tI"),s=n("9n94"),a=(n("Ktyj"),n("p46w")),i=n.n(a),o=n("EcEN"),u=n.n(o),l=n("Z7AQ"),d=function(e){var t=e.myActiveChats,n=e.setCurrentChat;return Object(r.jsx)("div",{className:"messager__users__items",children:t.map((function(e){return Object(r.jsx)("div",{className:"messager__users__item active",onClick:function(){return n(e)},children:Object(r.jsxs)("div",{className:"messager__users__item__content",children:[Object(r.jsx)("div",{className:"messager__users__item__title",children:Object(r.jsx)("h3",{children:e})}),Object(r.jsx)("div",{className:"messager__users__item__date"})]})})}))})},f=n("ejtQ"),m=function(e){var t=e.messages,n=void 0===t?[]:t,c=e.sendMessage,s=e.currentChat,a=e.messageBody,o=e.setMessageBody,u=i.a.get("active_user"),l=n.sort((function(e,t){return new Date(e.created).valueOf()-new Date(t.created).valueOf()}));return Object(r.jsxs)("div",{className:"messager__dialogue",children:[Object(r.jsx)("div",{className:"messager__dialogue__header",children:s}),Object(r.jsx)("div",{className:"messager__dialogue__content",children:l.map((function(e){return Object(r.jsxs)("div",{className:"messager__dialogue__item ".concat(u===e.sender&&"mine"),children:[Object(r.jsx)("span",{children:u===e.sender?"\u0412\u044b:":e.sender+":"}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{className:"tinyDate",children:Object(f.a)(e.created)}),Object(r.jsx)("div",{className:"messager__dialogue__item__content",children:Object(r.jsx)("p",{children:e.body})})]})}))}),Object(r.jsx)("div",{className:"messager__dialogue__type",children:Object(r.jsxs)("div",{className:"messager__dialogue__type__form",children:[Object(r.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u2026",value:a,onChange:function(e){return o(e.target.value)}}),Object(r.jsxs)("button",{className:"btn small",onClick:function(){return c(s,a)},children:[Object(r.jsx)("i",{className:"fas fa-paper-plane"}),"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"]})]})})]})},j=n("krZT");t.default=Object(j.a)((function(){var e=i.a.get("active_user"),t=Object(c.useState)([]),n=t[0],a=t[1],o=Object(c.useState)([]),f=o[0],j=o[1],h=Object(c.useState)(""),b=h[0],_=h[1],v=Object(c.useState)(null),g=v[0],p=v[1];Object(c.useEffect)((function(){Object(l.a)("/".concat(e,"/chats"),(function(e){a(Object.keys(e))})),Object(l.a)("/chats/".concat(g,"/messages"),(function(e){j(Object.values(e))}))}),[g]);return Object(r.jsxs)("div",{className:"messager__container container",children:[Object(r.jsxs)("div",{className:"products__title",children:[Object(r.jsx)(s.a,{}),Object(r.jsx)("h1",{className:"smaller_font",children:"\u041c\u043e\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})]}),Object(r.jsxs)("div",{className:"messager",children:[Object(r.jsxs)("div",{className:"messager__users",children:[Object(r.jsx)("div",{className:"messager__users__header",children:Object(r.jsxs)("form",{className:"messager__users__search",children:[Object(r.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0447\u0430\u0442\u0430\u043c"}),Object(r.jsx)("i",{className:"fas fa-search"})]})}),Object(r.jsx)(d,{setCurrentChat:p,myActiveChats:n})]}),g&&Object(r.jsx)(m,{sendMessage:function(e,t){var n=u()();Object(l.b)("/chats/".concat(e,"/messages/").concat(n),{body:t,sender:i.a.get("active_user"),created:(new Date).toISOString()}),_("")},currentChat:g,messages:f,messageBody:b,setMessageBody:_})]})]})}))}},[["Lyc5",0,1,6,7,8,3,4,5,9]]]);