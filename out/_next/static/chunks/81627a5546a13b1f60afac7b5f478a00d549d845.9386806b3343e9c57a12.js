(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{DOWF:function(e,t,a){"use strict";a.r(t);var s=a("nKUr"),c=a("1OyB"),i=a("JX7q"),n=a("vuIU"),r=a("Ji7U"),_=a("md7G"),l=a("foSv"),o=a("rePB"),d=a("q1tI"),p=a.n(d),h=a("/MKj"),j=a("vDqi"),m=a.n(j),b=a("krZT"),u=a("/LDy"),O=a("p46w"),x=a.n(O),g=a("CobJ"),f=a("395j"),v=a("IrUY"),N=a("ejtQ"),y=a("BdL6");function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,s=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;a=Reflect.construct(s,arguments,c)}else a=s.apply(this,arguments);return Object(_.a)(this,a)}}var C=function(e){Object(r.a)(a,e);var t=k(a);function a(e){var s;return Object(c.a)(this,a),s=t.call(this,e),Object(o.a)(Object(i.a)(s),"fileObj",[]),Object(o.a)(Object(i.a)(s),"fileArray",[]),s.city=Object(d.createRef)(),s.street=Object(d.createRef)(),s.state={loadMap:!1,loading:!1,area:"",image:[],class:1,type:1,year:"",totalArea:"",place:{place_id:"",placeBound:"",formatted_address:""},address:{address_id:"",formatted_address:""},floor:1,floor_type:1,rack:!0,ramp:!0,floor_load:"",parking_car:"",parking_cargo:"",price:"200000",price_type:1,currency:1,fire_system:new Map,ventilation:new Map,fire_alarm:!1,security_alarm:!1,storage_transport_area:!1,inline_block:!1},s.handleSubmit=s.handleSubmit.bind(Object(i.a)(s)),s.handleCheckBox=s.handleCheckBox.bind(Object(i.a)(s)),s.handleCheckBoxVent=s.handleCheckBoxVent.bind(Object(i.a)(s)),s.handleChange=s.handleChange.bind(Object(i.a)(s)),s.handleOtherCheckBox=s.handleOtherCheckBox.bind(Object(i.a)(s)),s.uploadMultipleFiles=s.uploadMultipleFiles.bind(Object(i.a)(s)),s.removeFile=s.removeFile.bind(Object(i.a)(s)),s}return Object(n.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.get("".concat("https://test.money-men.kz/api","/getCategory")).then((function(t){e.setState({categories:t.data})})),m.a.get("".concat("https://test.money-men.kz/api","/getSubcategories")).then((function(t){e.setState({subcategories:t.data})})),Object(v.a)((function(){e.setState({loadMap:!0},(function(){return e.initPlaceAPI()}))}))}}]),Object(n.a)(a,[{key:"initPlaceAPI",value:function(){var e=this,t="",a=new window.google.maps.places.Autocomplete(this.city.current,{types:["(cities)"]});new window.google.maps.event.addListener(a,"place_changed",(function(){var s=a.getPlace();console.log(s),t=s.geometry.viewport,e.setState({place:{place_id:s.place_id,placeBound:s.geometry.viewport,formatted_address:s.formatted_address}});var c=new window.google.maps.places.Autocomplete(e.street.current,{bounds:t,types:["geocode"],radius:0,origin:"center",strictBounds:!0});new window.google.maps.event.addListener(c,"place_changed",(function(){var t,a=c.getPlace(),s=new Map;a.address_components.forEach((function(e){s.set(e.long_name,e.long_name)})),t=Array.from(s.keys()).join(","),e.setState({address:{address_id:a.place_id,formatted_address:t}})}))}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state.image);var a=Array.from(this.state.fire_system.keys()).join(","),s=Array.from(this.state.ventilation.keys()).join(","),c=new FormData;c.append("token",x.a.get("token")),c.append("area",this.state.area),c.append("image",this.state.image),c.append("class",this.state.class),c.append("type",this.state.type),c.append("price",this.state.price),c.append("price_type",this.state.price_type),c.append("currency",this.state.currency),c.append("year",this.state.year),c.append("totalArea",this.state.totalArea),c.append("city_id",this.state.place.place_id),c.append("address",this.state.address.address_id),c.append("region",this.state.address.formatted_address),c.append("floor",this.state.floor),c.append("floor_type",this.state.floor_type),c.append("rack",Object(N.f)(this.state.rack)),c.append("ramp",Object(N.f)(this.state.ramp)),c.append("floor_load",this.state.floor_load),c.append("parking_car",this.state.parking_car),c.append("parking_cargo",this.state.parking_cargo),c.append("fire_system[]",a),c.append("ventilation[]",s),c.append("fire_alarm",Object(N.f)(this.state.fire_alarm)),c.append("security_alarm",Object(N.f)(this.state.security_alarm)),c.append("storage_transport_area",Object(N.f)(this.state.storage_transport_area)),c.append("inline_block",Object(N.f)(this.state.inline_block)),this.setState({loading:!0}),m.a.post("".concat("https://test.money-men.kz/api","/addStorage"),c).then((function(e){e.data.success?(t.setState({loading:!1}),t.props.successMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):(t.setState({loading:!1}),t.props.errorMessage(e.data.message||"\u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"))})).catch((function(e){console.log(e.response.data.status),t.setState({loading:!1,message:"\u041e\u0448\u0438\u0431\u043a\u0430"}),t.props.errorMessage("\u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")}))}},{key:"handleCheckBox",value:function(e){var t=e.target.value,a=e.target.checked;this.state.fire_system;this.setState((function(e){return{fire_system:e.fire_system.set(t,a)}}))}},{key:"handleCheckBoxVent",value:function(e){var t=e.target.value,a=e.target.checked;this.setState((function(e){return{ventilation:e.ventilation.set(t,a)}}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;console.log(this.state.area),this.setState(Object(o.a)({},s,a))}},{key:"handleOtherCheckBox",value:function(e){var t=e.target.name,a=e.target.checked;this.setState(Object(o.a)({},t,a))}},{key:"uploadMultipleFiles",value:function(e){this.fileObj.push(e.target.files);for(var t=0;t<this.fileObj[0].length;t++)this.fileArray.push(URL.createObjectURL(this.fileObj[0][t]));this.state.image.push(e.target.files[0]),this.setState({image:e.target.files[0]})}},{key:"removeFile",value:function(e){this.fileArray.splice(0,1),this.fileObj.splice(0,1),this.setState({image:this.fileObj})}},{key:"render",value:function(){var e=this;return Object(s.jsx)("section",{className:"post_ad__body",children:Object(s.jsxs)("div",{className:"products__container container",children:[Object(s.jsxs)("div",{className:"products__content",children:[Object(s.jsxs)("div",{className:"products__title",children:[Object(s.jsxs)("h4",{children:[Object(s.jsx)("a",{href:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})," / ",Object(s.jsx)("a",{href:"/storage",children:"\u0421\u043a\u043b\u0430\u0434\u044b"})," / ",Object(s.jsx)("a",{href:"#",className:"gray_font",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u044c\u044f\u0432\u043b\u0435\u043d\u0438\u0435"})]}),Object(s.jsx)("h1",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043a\u043b\u0430\u0434"}),Object(s.jsxs)("p",{className:"post_ad__title",children:["\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u043a\u043b\u0430\u0434\u0441\u043a\u043e\u0433\u043e \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0443\u044e ",Object(s.jsx)("br",{})," \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e."]})]}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsxs)("div",{className:"post_ad__storage__photos",children:[Object(s.jsx)("h2",{className:"post_ad__section_title",children:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0441\u043a\u043b\u0430\u0434\u0430"}),Object(s.jsx)("div",{className:"post_ad__storage__photos__wrapper",children:(this.fileArray||[]).map((function(t,a){var c;return Object(s.jsxs)("div",{className:"post_ad__storage__photo__item",children:[Object(s.jsx)("img",{src:t,alt:"..."}),Object(s.jsx)("i",(c={name:"name",value:"value",onClick:e.removeFile},Object(o.a)(c,"value",a),Object(o.a)(c,"className","fas fa-times-circle"),c))]},a)}))}),Object(s.jsxs)("div",{className:"fileUpload",children:[Object(s.jsx)("input",{type:"file",className:"upload",onChange:this.uploadMultipleFiles,accept:"image/*"}),Object(s.jsx)("span",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars",children:[Object(s.jsx)("h2",{className:"post_ad__section_title",children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u0441\u043a\u043b\u0430\u0434\u0430"}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__wrapper",children:[Object(s.jsxs)("div",{className:"post_ad__storage__chars__items",children:[Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041f\u043b\u043e\u0449\u0430\u0434\u044c, \u043c2"}),Object(s.jsx)("input",{type:"number",name:"area",className:"post_ad__input",value:this.state.area,onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041e\u0431\u0449. \u043f\u043b\u043e\u0449\u0430\u0434\u044c, \u043c2"}),Object(s.jsx)("input",{name:"totalArea",className:"post_ad__input",type:"number",value:this.state.totalArea,onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041a\u043b\u0430\u0441\u0441"}),Object(s.jsxs)("select",{name:"class",className:"post_ad__input",value:this.state.class,onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"1",children:"B+"}),Object(s.jsx)("option",{value:"2",children:"A+"})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0422\u0438\u043f \u0441\u043a\u043b\u0430\u0434\u0430"}),Object(s.jsx)("select",{name:"type",className:"post_ad__input",value:this.state.type,onChange:this.handleChange,children:Object(s.jsx)("option",{value:"1",children:"\u0421\u0443\u0445\u043e\u0439 (+14/+24)"})})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__items",children:[Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0413\u043e\u0434 \u043f\u043e\u0441\u0442\u0440\u043e\u0439\u043a\u0438, \u0433"}),Object(s.jsx)("input",{name:"year",className:"post_ad__input",type:"number",value:this.state.year,onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0413\u043e\u0440\u043e\u0434/\u0420\u0435\u0433\u0438\u043e\u043d"}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item__input",children:[Object(s.jsx)("input",{name:"city_id",ref:this.city,className:"post_ad__input",type:"text",placeholder:" "}),Object(s.jsx)("i",{className:"fas fa-map-marker-alt"})]})]})]}),Object(s.jsx)("div",{className:"post_ad__storage__chars__items",children:Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0410\u0434\u0440\u0435\u0441"}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item__input",children:[Object(s.jsx)("input",{name:"address",disabled:""==this.state.place.place_id,ref:this.street,className:"post_ad__input",type:"text",placeholder:" "}),Object(s.jsx)("i",{className:"fas fa-map-marker-alt"})]})]})}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__items",children:[Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u042d\u0442\u0430\u0436\u043d\u043e\u0441\u0442\u044c"}),Object(s.jsx)("select",{onChange:this.handleChange,value:this.state.floor,name:"floor",className:"post_ad__input",children:Object(s.jsx)("option",{children:"1 \u044d\u0442\u0430\u0436"})})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041f\u0430\u0440\u043a\u0438\u043d\u0433, \u0433\u0440\u0443\u0437. \u0430\u0432\u0442\u043e"}),Object(s.jsx)("input",{name:"parking_cargo",onChange:this.handleChange,value:this.state.parking_cargo,className:"post_ad__input",type:"text",placeholder:""})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041f\u0430\u0440\u043a\u0438\u043d\u0433, \u043b\u0435\u0433\u043a. \u0430\u0432\u0442\u043e"}),Object(s.jsx)("input",{name:"parking_car",onChange:this.handleChange,value:this.state.parking_car,className:"post_ad__input",type:"text",placeholder:""})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__items",children:[Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0422\u0438\u043f \u043f\u043e\u043b\u0430"}),Object(s.jsx)("select",{name:"floor_type",value:this.state.floor_type,onChange:this.handleChange,className:"post_ad__input",children:Object(s.jsx)("option",{children:"\u0411\u0435\u0442\u043e\u043d\u043d\u044b\u0439"})})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b"}),Object(s.jsx)("input",{name:"floor_load",onChange:this.handleChange,value:this.state.floor_load,className:"post_ad__input",type:"text",placeholder:""})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item margin",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u0421\u0442\u0435\u043b\u043b\u0430\u0436\u0438"}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox noMargin",children:[Object(s.jsx)("input",{name:"rack",type:"checkbox",checked:this.state.rack,onChange:this.handleOtherCheckBox}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b"})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__chars__item margin",children:[Object(s.jsx)("p",{className:"post_ad__par",children:"\u041f\u0430\u043d\u0434\u0443\u0441 "}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox noMargin",children:[Object(s.jsx)("input",{name:"ramp",type:"checkbox",checked:this.state.ramp,onChange:this.handleOtherCheckBox}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0415\u0441\u0442\u044c"})]})]})]})]})]}),Object(s.jsxs)("div",{className:"post_ad__aditional",children:[Object(s.jsx)("h2",{className:"post_ad__section_title storage_additional__title",children:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(s.jsxs)("div",{className:"post_ad__aditional__checkbox__wrapper",children:[Object(s.jsxs)("div",{className:"post_ad__aditional__checkbox__items",children:[Object(s.jsx)("h3",{children:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u043e\u0436\u0430\u0440\u043e\u0442\u0443\u0448\u0435\u043d\u0438\u044f"}),f.d.map((function(t){return Object(s.jsx)(u.a,{name:t.name.replace(/(\S+\s*){1,2}/g,"$&\n"),value:t.id,checked:e.state.fire_system.get(t.id),handleCheckBox:e.handleCheckBox})}))]}),Object(s.jsxs)("div",{className:"post_ad__aditional__checkbox__items",children:[Object(s.jsx)("h3",{children:"\u0412\u0435\u043d\u0442\u0438\u043b\u044f\u0446\u0438\u044f"}),f.f.map((function(t){return Object(s.jsx)(u.a,{name:t.name,value:t.id,checked:e.state.ventilation.get(t.id),handleCheckBox:e.handleCheckBoxVent})}))]}),Object(s.jsxs)("div",{className:"post_ad__aditional__checkbox__items",children:[Object(s.jsx)("h3",{children:"\u041f\u043e\u0436\u0430\u0440\u043d\u0430\u044f \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox",children:[Object(s.jsx)("input",{checked:this.state.fire_alarm,onChange:this.handleOtherCheckBox,name:"fire_alarm",type:"checkbox"}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0415\u0441\u0442\u044c"})]}),Object(s.jsx)("h3",{className:"margin",children:"\u041e\u0445\u0440\u0430\u043d\u043d\u0430\u044f \u0441\u0438\u0433\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox",children:[Object(s.jsx)("input",{checked:this.state.security_alarm,onChange:this.handleOtherCheckBox,name:"security_alarm",type:"checkbox"}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0415\u0441\u0442\u044c"})]}),Object(s.jsxs)("h3",{className:"margin",children:["\u041f\u043b\u043e\u0449\u0430\u0434\u043a\u0430 \u0434\u043b\u044f \u043e\u0442\u0441\u0442\u043e\u044f \u0438 ",Object(s.jsx)("br",{})," \u043c\u0430\u043d\u0435\u0432\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"]}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox",children:[Object(s.jsx)("input",{checked:this.state.storage_transport_area,onChange:this.handleOtherCheckBox,name:"storage_transport_area",type:"checkbox"}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0415\u0441\u0442\u044c"})]}),Object(s.jsxs)("h3",{className:"margin",children:["\u0412\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u0431\u043b\u043e\u043a\u0438 \u043e\u0444\u0438\u0441\u043d\u044b\u0445 ",Object(s.jsx)("br",{})," \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0439"]}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox",children:[Object(s.jsx)("input",{checked:this.inline_block,onChange:this.handleOtherCheckBox,name:"inline_block",type:"checkbox"}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0415\u0441\u0442\u044c"})]})]})]}),Object(s.jsxs)("div",{className:"post_ad__storage__comment",children:[Object(s.jsx)("h2",{className:"post_ad__section_title",children:"\u0418\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430"}),Object(s.jsx)("div",{className:"post_ad__aditional__text",children:Object(s.jsx)("textarea",{placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435, \u043e \u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0435 \u0441\u043a\u043b\u0430\u0434\u0430",rows:5,defaultValue:""})})]})]}),Object(s.jsx)(y.a,{}),Object(s.jsxs)("div",{className:"post_ad__btns",children:[Object(s.jsx)("button",{className:"btn",type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435"}),Object(s.jsxs)("div",{className:"post_ad__price__checkbox",children:[Object(s.jsx)("input",{type:"checkbox"}),Object(s.jsx)("p",{className:"post_ad__par",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0442\u043e\u043f"})]})]})]})]}),Object(s.jsx)("div",{className:"products__aside"})]})})}}]),a}(p.a.Component);t.default=Object(b.a)(Object(h.b)(null,(function(e){return{errorMessage:function(t){e(g.b(t))},successMessage:function(t){e(g.c(t))}}}))(C))}}]);