_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[41],{Hah2:function(e,t,n){"use strict";var a=n("nKUr"),r=n("rePB"),s=n("q1tI"),i=n("XqpU"),o=n("20a2"),c=n("EVdn"),d=n.n(c),l=n("vDqi"),u=n.n(l);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.onChangeCategory,n=(e.activeCategory,e.setPosts),r=e.setTotal,c=e.setCurrentPage,l=e.setLoading,_=e.queryFilter,p=e.fromString,j=e.setMaxPage,g=e.fromId,f=e.toString,b=e.toId,O=Object(o.useRouter)(),v=O.pathname,h=O.query.id,y=O.query.from_string,x=O.query.to_string,w=O.query.net_start,S=O.query.net_end,P=O.query.volume_start,E=O.query.volume_end,N=Object(s.useState)(""),q=N[0],k=N[1],C=Object(s.useState)({netStart:"",netEnd:""}),D=C[0],T=C[1],z=Object(s.useState)({volumeStart:"",volumeEnd:""}),I=z[0],R=z[1],U=Object(s.useState)(""),L=U[0],J=U[1],A=Object(s.useState)({address_string:p||"",address_id:g||""}),G=A[0],H=A[1],K=Object(s.useState)({address_string:f||"",address_id:b||""}),V=K[0],X=K[1],B=Object(s.useRef)(null),F=Object(s.useRef)(null),M=O.pathname;Object(s.useEffect)((function(){Q(),d()(".big_filter_btn").click((function(){d()(".main_filter__big").toggleClass("active")}))}),[]),Object(s.useEffect)((function(){(G.address_id||V.address_id)&&Y(G.address_id,V.address_id,G.address_string,V.address_string,D.netStart,D.netEnd,I.volumeStart,I.volumeEnd)}),[G,V]);var Y=function(){!function(e,t){delete e.page,G.address_id||(delete e.from_id,delete e.from_string),V.address_id||(delete e.to_id,delete e.to_string),D.netStart||delete e.net_start,D.netEnd||delete e.net_end,I.volumeStart||delete e.volume_start,I.volumeEnd||delete e.volumeEnd,G.address_id&&(t.from_id=G.address_id,t.from_string=G.address_string),V.address_id&&(t.to_id=V.address_id,t.to_string=V.address_string),D.netStart&&(t.net_start=D.netStart),D.netEnd&&(t.net_end=D.netEnd),I.volumeStart&&(t.volume_start=I.volumeStart),I.volumeEnd&&(t.volume_end=I.volumeEnd),l(!0),u.a.get("".concat("https://test.money-men.kz/api","/filterPost"),{params:{type_transport:"0"===h?"":h,from:G.address_id,to:V.address_id,net_start:D.netStart,net_end:D.netEnd,volume_start:I.volumeStart,volume_end:I.volumeEnd}}).then((function(a){console.log(a),console.log(V),l(!1),n(a.data.data),c(a.data.pagination.page),r(a.data.pagination.total),j(a.data.pagination.max_page),O.push({path:v,query:m(m({},e),t)})}))}(O.query,{})};function Z(e){"from"===e.target.id?(k(""),H({address_string:"",address_id:""})):X({address_string:"",address_id:""})}var Q=function(){var e=new window.google.maps.places.Autocomplete(B.current,{types:["(cities)"],componentRestrictions:{country:["kz","ru","kg","az","uz","am"]}});new window.google.maps.event.addListener(e,"place_changed",(function(){var t=e.getPlace();k(""),console.log(t),H({address_string:t.formatted_address,address_id:t.place_id})}));var t=new window.google.maps.places.Autocomplete(F.current,{types:["(cities)"],componentRestrictions:{country:["kz","ru","kg","az","uz","am"]}});new window.google.maps.event.addListener(t,"place_changed",(function(){J("");var e=t.getPlace();console.log(e),X({address_string:e.formatted_address,address_id:e.place_id})}))};return Object(a.jsx)("div",{className:"main_filter",children:Object(a.jsxs)("div",{className:"main_filter__content container",children:[Object(a.jsxs)("div",{className:"main_filter__top",children:[Object(a.jsx)("div",{className:"main_filter__top__item",children:Object(a.jsxs)("div",{className:"filter__item__title",children:[Object(a.jsx)("h4",{children:"\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"}),Object(a.jsx)("div",{className:"filter__item__form",children:i.d.map((function(e){return Object(a.jsx)("a",{onClick:function(){return t(e.name,e.id)},className:_===e.name?"active":"",children:e.name},e.id)}))})]})}),Object(a.jsx)("div",{className:"main_filter__top__item",children:Object(a.jsxs)("div",{className:"filter__item__title",children:[Object(a.jsx)("h4",{children:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"}),Object(a.jsxs)("div",{className:"filter__item__form",children:[Object(a.jsx)("input",{type:"text",value:q,onChange:function(e){return k(e.target.value)},placeholder:G.address_string||"\u041e\u0442\u043a\u0443\u0434\u0430",ref:B}),Object(a.jsx)("div",{className:"hr"}),Object(a.jsx)("input",{type:"text",value:L,onChange:function(e){return J(e.target.value)},placeholder:V.address_string||"\u041a\u0443\u0434\u0430",ref:F}),Object(a.jsx)("button",{onClick:function(){return setTimeout((function(){location.reload()}),200),void("/cargo"===M?O.push("/cargo"):O.push("/cargo/transport"))},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}),Object(a.jsx)("button",{type:"button",className:"big_filter_btn",children:"\u0412\u0441\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b"})]})]})})]}),Object(a.jsx)("form",{className:"main_filter__big",children:Object(a.jsxs)("div",{className:"main_filter__big__items",children:[Object(a.jsxs)("div",{className:"main_filter__big__item",children:[Object(a.jsx)("label",{children:"\u0412\u0435\u0441"}),Object(a.jsxs)("div",{className:"main_filter__big__item_inputs",children:[Object(a.jsx)("input",{type:"number",value:D.netStart,onChange:function(e){T({netStart:e.target.value,netEnd:D.netEnd})},placeholder:"\u043e\u0442"}),Object(a.jsx)("p",{children:"-"}),Object(a.jsx)("input",{type:"number",value:D.netEnd,onChange:function(e){T({netStart:D.netStart,netEnd:e.target.value})},placeholder:"\u0434\u043e"})]})]}),Object(a.jsxs)("div",{className:"main_filter__big__item",children:[Object(a.jsx)("label",{children:"\u041e\u0431\u044a\u0435\u043c"}),Object(a.jsxs)("div",{className:"main_filter__big__item_inputs",children:[Object(a.jsx)("input",{type:"number",value:I.volumeStart,onChange:function(e){return R({volumeStart:e.target.value,volumeEnd:I.volumeEnd})},placeholder:" \u043e\u0442"}),Object(a.jsx)("p",{children:"-"}),Object(a.jsx)("input",{type:"number",value:I.volumeEnd,placeholder:" \u0434\u043e",onChange:function(e){return R({volumeStart:I.volumeStart,volumeEnd:e.target.va})}})]})]})]})}),Object(a.jsx)("div",{className:"filter__item__form showbtn",children:Object(a.jsx)("button",{onClick:function(){return Y()},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"})}),Object(a.jsxs)("div",{className:"main_filter__bottom",children:[w||S?Object(a.jsxs)("div",{className:"main_filter__bottom__item",children:[Object(a.jsxs)("p",{children:["\u0412\u0435\u0441: ",w||"\u221e"," \u0442\u043d - ",S||"\u221e"," \u0442\u043d"]}),Object(a.jsx)("i",{className:"fas fa-times"})]}):"",P||E?Object(a.jsxs)("div",{className:"main_filter__bottom__item",children:[Object(a.jsxs)("p",{children:["\u041f\u043b\u043e\u0449\u0430\u0434\u044c: ",P||"\u221e"," \u043c\xb3 - ",E||"\u221e"," \u043c\xb3"]}),Object(a.jsx)("i",{className:"fas fa-times"})]}):"",y?Object(a.jsxs)("div",{className:"main_filter__bottom__item",children:[Object(a.jsxs)("p",{children:["\u043e\u0442: ".concat(y," ")," "]}),Object(a.jsx)("i",{id:"from",className:"fas fa-times",onClick:function(e){return Z(e)}})]}):"",x?Object(a.jsxs)("div",{className:"main_filter__bottom__item",children:[Object(a.jsxs)("p",{children:["\u0434\u043e: ".concat(x," ")," "]}),Object(a.jsx)("i",{id:"to",className:"fas fa-times",onClick:function(e){return Z(e)}})]}):""]})]})})}},IrUY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){if("object"===typeof window.google&&"object"===typeof window.google.maps)e();else{var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDwgq_3mUoJkLm7aTUbH2Z44y6RVm92DV0","&libraries=places"),window.document.body.appendChild(t),t.addEventListener("load",e)}}},PTTT:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cargo",function(){return n("iIJG")}])},iIJG:function(e,t,n){"use strict";n.r(t);var a=n("nKUr"),r=n("rePB"),s=n("q1tI"),i=n("vDqi"),o=n.n(i),c=n("20a2"),d=n("3d9w"),l=n("Hah2"),u=n("a9Ks"),_=n("DPTp"),m=n("IrUY");n("89P7");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(){var e=Object(c.useRouter)(),t=e.pathname,n=e.query.filter,r=e.query.id,i=(e.query.cargoId,e.query.from_string),p=e.query.from_id,g=e.query.to_string,f=e.query.net_start,b=e.query.net_end,O=e.query.volume_start,v=e.query.volume_end,h=e.query.to_id,y=e.query.page,x=Object(s.useState)(!0),w=x[0],S=x[1],P=Object(s.useState)([{}]),E=P[0],N=P[1],q=Object(s.useState)(y||"1"),k=q[0],C=q[1],D=Object(s.useState)(0),T=D[0],z=D[1],I=Object(s.useState)({}),R=I[0],U=I[1],L=Object(s.useState)(0),J=L[0],A=L[1],G=Object(s.useState)(!1),H=G[0],K=G[1];Object(s.useEffect)((function(){o.a.get("https://test.money-men.kz/api/newGetPost?category_id=1").then((function(e){U(e.data.top)})),Object(m.a)((function(){K(!0),console.log(e.query)})),S(!0);o.a.get("".concat("https://test.money-men.kz/api","/filterPost"),{params:{page:y,type_transport:"0"===r?"":r,from:p,to:h,net_start:f,net_end:b,volume_start:O,volume_end:v}}).then((function(e){console.log(e),S(!1),N(e.data.data),z(e.data.pagination.total),C(e.data.pagination.page),A(e.data.pagination.max_page)}))}),[]);return Object(a.jsxs)("div",{children:[H?Object(a.jsx)(l.a,{queryFilter:n||"\u0412\u0441\u0435",onChangeCategory:function(n,a){S(!0),o.a.get("".concat("https://test.money-men.kz/api","/filterPost"),{params:{type_transport:0===a?"":a,from:p,to:h}}).then((function(r){var s=e.query;delete s.page,e.push({path:t,query:j(j({},s),{},{filter:n,id:a})}),S(!1),N(r.data.data),C(r.data.pagination.page),z(r.data.pagination.total),A(r.data.pagination.max_page)}))},fromString:i,fromId:p,toString:g,toId:h,setLoading:S,setPosts:N,setCurrentPage:C,setTotal:z,setMaxPage:A}):Object(a.jsx)("div",{children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 ... "}),Object(a.jsxs)("div",{className:"products__container container",children:[w?Object(a.jsx)(d.a,{}):"",Object(a.jsx)(u.a,{post:E,total:T,maxPage:J,currentPage:k,onChangePage:function(n){S(!0);console.log(n),o.a.get("".concat("https://test.money-men.kz/api","/filterPost"),{params:{type_transport:"0"===r?"":r,page:n,from:p,to:h}}).then((function(a){e.push({path:t,query:j(j({},e.query),{},{page:n})}),console.log(a),S(!1),N(a.data.data),C(a.data.pagination.page),z(a.data.pagination.total),A(a.data.pagination.max_page)}))},tops:R,pathName:e.pathname}),Object(a.jsx)(_.a,{})]})]})}}},[["PTTT",0,1,6,7,8,12,2,3,4,5,10,11,13,16,14,22]]]);