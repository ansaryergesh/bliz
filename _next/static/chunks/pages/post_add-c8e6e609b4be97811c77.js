_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[62],{TLKG:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post_add",function(){return n("cbXz")}])},cbXz:function(e,t,n){"use strict";n.r(t);var a=n("nKUr"),c=n("1OyB"),s=n("JX7q"),i=n("vuIU"),o=n("Ji7U"),r=n("md7G"),l=n("foSv"),u=n("q1tI"),d=n.n(u),b=n("KYPV"),j=n("/MKj"),h=n("vDqi"),m=n.n(h),p=n("3d9w"),f=n("p46w"),g=n.n(f),O=n("krZT"),v=n("CobJ");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(r.a)(this,n)}}var x=function(e){Object(o.a)(n,e);var t=_(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={loading:!1,categories:[],subcategories:[]},a.handleSubmit=a.handleSubmit.bind(Object(s.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;m.a.get("".concat("https://test.money-men.kz/api","/getCategory")).then((function(t){e.setState({categories:t.data})})),m.a.get("".concat("https://test.money-men.kz/api","/getSubcategories")).then((function(t){e.setState({subcategories:t.data})}))}}]),Object(i.a)(n,[{key:"handleSubmit",value:function(e){var t=this;this.setState({loading:!0}),m.a.post("".concat("https://test.money-men.kz/api","/addPost"),e).then((function(e){e.data.success?(t.setState({loading:!1}),t.props.successMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d")):(t.setState({loading:!1}),t.props.errorMessage(e.data.message||"\u0427\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"))})).catch((function(e){console.log(e),t.setState({loading:!1,message:"\u041e\u0448\u0438\u0431\u043a\u0430"})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"register",children:Object(a.jsxs)("div",{className:"register__container",children:[this.state.loading||this.state.loading?Object(a.jsx)(p.a,{}):null,Object(a.jsx)("h2",{children:"\u0420\u0410\u0417\u041c\u0415\u0421\u0422\u0418\u0422\u042c \u041e\u0411\u042a\u042f\u0412\u041b\u0415\u041d\u0418\u0415"}),Object(a.jsx)(b.c,{initialValues:{title:"test",sub_id:0,category_id:0,volume:20,net:20,start_date:"2020-12-20",end_date:"2020-12-20",from:"Almaty",to:"Shymkent",token:g.a.get("token"),price:"10000"},onSubmit:function(t){e.handleSubmit(t)},children:Object(a.jsxs)(b.b,{className:"register_form",children:[Object(a.jsx)(b.a,{name:"title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(a.jsxs)(b.a,{name:"category_id",as:"select",children:[Object(a.jsx)("option",{value:"0",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),this.state.categories.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(a.jsxs)(b.a,{name:"sub_id",as:"select",children:[Object(a.jsx)("option",{value:"0",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0443\u0431\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}),this.state.subcategories.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(a.jsx)(b.a,{name:"volume",placeholder:"\u0415\u043c\u043a\u043e\u0441\u0442\u044c (\u043c3) "}),Object(a.jsx)(b.a,{name:"net",placeholder:"\u041c\u0430\u0441\u0441\u0430 (\u0442\u043d)"}),Object(a.jsx)(b.a,{name:"start_date",placeholder:"\u0414\u0430\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438"}),Object(a.jsx)(b.a,{name:"end_date",placeholder:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f"}),Object(a.jsx)(b.a,{name:"from",placeholder:"\u041c\u0435\u0441\u0442\u043e \u043d\u0430\u0447\u0430\u043b\u043e"}),Object(a.jsx)(b.a,{name:"to",placeholder:"\u041c\u0435\u0441\u0442\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435"}),Object(a.jsx)(b.a,{name:"price",placeholder:"\u0426\u0435\u043d\u0430"}),!1===this.state.loading?Object(a.jsx)("button",{className:"btn",type:"submit",children:"\u0420\u0410\u0417\u041c\u0415\u0421\u0422\u0418\u0422\u042c"}):Object(a.jsx)("button",{className:"btn",disabled:!0,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})})]})})}}]),n}(d.a.Component);t.default=Object(O.a)(Object(j.b)(null,(function(e){return{errorMessage:function(t){e(v.b(t))},successMessage:function(t){e(v.c(t))}}}))(x))}},[["TLKG",0,1,6,7,8,3,2,4,5,9,14]]]);